import{_ as p,r as d,u as m,a as f,q as _,j as y,c as i,b as h,d as s,t as k,o as t}from "./index-CxPmLex7.js";import{L as v}from "./LoadingSpinner-Cy4g5JNQ.js";const L={key:1,class:"error-container"},w={key:2},b={__name:"GoogleLoadingPage",setup(S){const u=d(!0),n=d(""),c=m(),r=y();f(async()=>{await g(),u.value=!1});const g=async()=>{var l,e;try{const a=new URL(window.location.href).searchParams.get("code");if(!a)throw new Error("인증 코드가 없습니다.");const o=await _.googleLogin(a);o.token?(c.setToken(o.token),r.replace("/")):(c.setSocialInfo({id:o.id||o.sub,name:o.name,email:o.email,profile:o.profile,birthday:o.birthday,type:"google"}),r.push("/join"))}catch(a){console.error("구글 로그인 실패:",a),n.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"구글 로그인에 실패했습니다.",setTimeout(()=>{r.replace("/login")},2e3)}};return(l, e)=>(t(),i("div",null,[u.value?(t(),h(v,{key:0})):n.value?(t(),i("div",L,[e[0]||(e[0]=s("h2",null,"로그인 실패",-1)),s("p",null,k(n.value),1),e[1]||(e[1]=s("p",null,"로그인 페이지로 이동합니다...",-1))])):(t(),i("div",w,e[2]||(e[2]=[s("h1",null,"페이지 본문입니다",-1)])))]))}},P=p(b,[["__scopeId","data-v-1ab2bad7"]]);export{P as default};
