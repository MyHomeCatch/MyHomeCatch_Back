import{_ as k,r as d,u as m,a as f,q as g,j as _,c as l,b as y,d as t,t as h,o as s}from "./index-CxPmLex7.js";import{L as v}from "./LoadingSpinner-Cy4g5JNQ.js";const w={key:1,class:"error-container"},L={key:2},S={__name:"KakaoLoadingPage",setup(B){const c=d(!0),n=d(""),u=m(),r=_();f(async()=>{await p(),c.value=!1});const p=async()=>{var i,e;try{const o=new URL(window.location.href).searchParams.get("code");if(!o)throw new Error("인증 코드가 없습니다.");const a=await g.kakaoLogin(o);a.token?(u.setToken(a.token),r.replace("/")):(u.setSocialInfo({id:a.id,nickname:a.nickname,email:a.email,profile:a.profile,birthday:a.birthday,type:"kakao"}),r.push("/join"))}catch(o){n.value=((e=(i=o.response)==null?void 0:i.data)==null?void 0:e.message)||"카카오 로그인에 실패했습니다.",setTimeout(()=>{r.replace("/login")},2e3)}};return(i, e)=>(s(),l("div",null,[c.value?(s(),y(v,{key:0})):n.value?(s(),l("div",w,[e[0]||(e[0]=t("h2",null,"로그인 실패",-1)),t("p",null,h(n.value),1),e[1]||(e[1]=t("p",null,"로그인 페이지로 이동합니다...",-1))])):(s(),l("div",L,e[2]||(e[2]=[t("h1",null,"페이지 본문입니다",-1)])))]))}},P=k(S,[["__scopeId","data-v-2a3399d5"]]);export{P as default};
